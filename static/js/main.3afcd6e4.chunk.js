(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(61),o=a.n(l),c=a(3),u=a(63),i=a(64),m=a(65),s=a(71),d=a(66),g=a(72),b=a(67),p=a.n(b),f=a(30),w=a(41),E=a.n(w),y=a(68),h=a(42),v=a(43),O=a.n(v),C=function(e){return{type:"FETCH_PLAYER_GAMES",payload:e}};function j(e,t,a){return-1===a.slice(t+1).findIndex(function(t,a,n){return t.id===e.id})}var P={updatePlayerToStore:function(e,t,a){return console.log("updatePlayerToStore",e,t,a),{type:"UPDATE_PLAYER",payload:{playerId:e,name:t,bggName:a}}},deletePlayerFromStore:function(e){return{type:"DELETE_PLAYER",payload:{playerId:e}}},fetchPlayerGames:function(e){return function(){var t=Object(y.a)(E.a.mark(function t(a,n){var r,l,o,c,u;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetchPlayerGames",e.id,e.bggName),l=[],t.prev=2,t.next=5,O.a.get("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e.bggName));case 5:return o=t.sent,Object(h.parseString)(o.data,function(e,t){r=t.items.item.map(function(e){return{id:e.$.objectid,name:e.name[0]._}})}),l=r.filter(j),c=(c=l.reduce(function(e,t){return e+"".concat(t.id,",")},"")).slice(0,c.length-1),t.next=12,O.a.get("https://www.boardgamegeek.com/xmlapi2/thing?id=".concat(c));case 12:u=t.sent,Object(h.parseString)(u.data,function(e,t){console.log("_games.items=",t.items),r=t.items.item.map(function(e){return{id:e.$.id,name:e.name[0].$.value,min:e.minplayers[0].$.value,max:e.maxplayers[0].$.value}})}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:a(C(r));case 20:case"end":return t.stop()}},t,null,[[2,16]])}));return function(e,a){return t.apply(this,arguments)}}()}},N=Object(c.b)(null,P)(function(e){var t=e.player,a=e.updatePlayerToStore,n=e.deletePlayerFromStore,l=e.fetchPlayerGames,o=r.a.useState(!1),c=Object(f.a)(o,2),u=c[0],i=c[1],m=r.a.useState(t.name),s=Object(f.a)(m,2),d=s[0],g=s[1],b=r.a.useState(t.bggName),p=Object(f.a)(b,2),w=p[0],E=p[1];return r.a.createElement("div",{className:"w3-margin-bottom"},u&&r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",r.a.createElement("input",{type:"text",name:"name",value:d,onChange:function(e){return g(e.target.value)}})),r.a.createElement("div",null,"BGG: ",r.a.createElement("input",{type:"text",name:"bggName",value:w,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{class:"w3-bar"},r.a.createElement("button",{class:"w3-button w3-blue",onClick:function(){a(t.id,d,w),i(!1)}},"Valid"),r.a.createElement("button",{class:"w3-button w3-light-grey",onClick:function(){return i(!1)}},"Cancel"))),!u&&r.a.createElement("div",null,r.a.createElement("p",null,t.name),r.a.createElement("p",null,t.bggName),r.a.createElement("div",{class:"w3-bar"},r.a.createElement("button",{class:"w3-button w3-blue",onClick:function(){return i(!0)}},"Edit"),r.a.createElement("button",{class:"w3-button w3-red",onClick:function(){return n(t.id)}},"Remove"),r.a.createElement("button",{class:"w3-button w3-light-grey",onClick:function(){return l(t)},disabled:!t.bggName},"Fetch"))))}),S=Object(c.b)(function(e,t){return{players:e.bgg.players}},null)(function(e){return r.a.createElement("div",{className:"w3-border w3-border-black"},e.players.map(function(e,t){return r.a.createElement(N,{key:e.id,player:e})}))});var k=Object(c.b)(function(e,t){return{games:e.bgg.games}},null)(function(e){var t=e.games;return r.a.createElement("div",{className:"w3-white w3-margin-top w3-margin-bottom"},r.a.createElement("table",{className:"w3-table w3-striped w3-bordered w3-hoverable"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"w3-teal"},r.a.createElement("th",null,"name"),r.a.createElement("th",null,"min"),r.a.createElement("th",null,"max"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.min),r.a.createElement("td",null,e.max))}))))}),x=Object(c.b)(function(e,t){return{games:e.bgg.games,nbPlayers:e.bgg.players.length}},null)(function(e){var t=r.a.useMemo(function(){return function(e,t){var a=e.filter(function(e){return e.min<=t&&t<=e.max});return 0===a.length?void 0:a[0]}(e.games,e.nbPlayers)},[e.nbPlayers,e.games.length]);return t?r.a.createElement("div",{className:"w3-panel w3-pale-green w3-bottombar w3-border-green w3-border"},r.a.createElement("h1",null,t.name),r.a.createElement("h2",null,"min: ".concat(t.min," | max: ").concat(t.max))):r.a.createElement("div",{className:"w3-margin w3-card w3-yellow"},r.a.createElement("h3",null,"no game :("))});var A=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).addPlayer=function(){var e={id:p()(),name:"rename me",bggName:"",age:18,color:"blue",fetched:!1};a.props.addPlayerToStore(e)},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"w3-row w3-light-blue"},r.a.createElement("div",{className:"w3-third w3-container"},r.a.createElement(x,null)),r.a.createElement("img",{alt:"gravatar",src:(e="braTac@free.fr ",t=32,t=t||80,"http://www.gravatar.com/avatar/"+function(e){function t(e,t){return e<<t|e>>>32-t}function a(e,t){var a,n,r,l,o;return r=2147483648&e,l=2147483648&t,o=(1073741823&e)+(1073741823&t),(a=1073741824&e)&(n=1073741824&t)?2147483648^o^r^l:a|n?1073741824&o?3221225472^o^r^l:1073741824^o^r^l:o^r^l}function n(e,n,r,l,o,c,u){return e=a(e,a(a(function(e,t,a){return e&t|~e&a}(n,r,l),o),u)),a(t(e,c),n)}function r(e,n,r,l,o,c,u){return e=a(e,a(a(function(e,t,a){return e&a|t&~a}(n,r,l),o),u)),a(t(e,c),n)}function l(e,n,r,l,o,c,u){return e=a(e,a(a(function(e,t,a){return e^t^a}(n,r,l),o),u)),a(t(e,c),n)}function o(e,n,r,l,o,c,u){return e=a(e,a(a(function(e,t,a){return t^(e|~a)}(n,r,l),o),u)),a(t(e,c),n)}function c(e){var t,a="",n="";for(t=0;t<=3;t++)a+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return a}var u,i,m,s,d,g,b,p,f,w;for(u=function(e){for(var t,a=e.length,n=a+8,r=16*((n-n%64)/64+1),l=Array(r-1),o=0,c=0;c<a;)o=c%4*8,l[t=(c-c%4)/4]=l[t]|e.charCodeAt(c)<<o,c++;return o=c%4*8,l[t=(c-c%4)/4]=l[t]|128<<o,l[r-2]=a<<3,l[r-1]=a>>>29,l}(e=function(e){e=e.replace(/rn/g,"n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)),b=1732584193,p=4023233417,f=2562383102,w=271733878,i=0;i<u.length;i+=16)m=b,s=p,d=f,g=w,b=n(b,p,f,w,u[i+0],7,3614090360),w=n(w,b,p,f,u[i+1],12,3905402710),f=n(f,w,b,p,u[i+2],17,606105819),p=n(p,f,w,b,u[i+3],22,3250441966),b=n(b,p,f,w,u[i+4],7,4118548399),w=n(w,b,p,f,u[i+5],12,1200080426),f=n(f,w,b,p,u[i+6],17,2821735955),p=n(p,f,w,b,u[i+7],22,4249261313),b=n(b,p,f,w,u[i+8],7,1770035416),w=n(w,b,p,f,u[i+9],12,2336552879),f=n(f,w,b,p,u[i+10],17,4294925233),p=n(p,f,w,b,u[i+11],22,2304563134),b=n(b,p,f,w,u[i+12],7,1804603682),w=n(w,b,p,f,u[i+13],12,4254626195),f=n(f,w,b,p,u[i+14],17,2792965006),b=r(b,p=n(p,f,w,b,u[i+15],22,1236535329),f,w,u[i+1],5,4129170786),w=r(w,b,p,f,u[i+6],9,3225465664),f=r(f,w,b,p,u[i+11],14,643717713),p=r(p,f,w,b,u[i+0],20,3921069994),b=r(b,p,f,w,u[i+5],5,3593408605),w=r(w,b,p,f,u[i+10],9,38016083),f=r(f,w,b,p,u[i+15],14,3634488961),p=r(p,f,w,b,u[i+4],20,3889429448),b=r(b,p,f,w,u[i+9],5,568446438),w=r(w,b,p,f,u[i+14],9,3275163606),f=r(f,w,b,p,u[i+3],14,4107603335),p=r(p,f,w,b,u[i+8],20,1163531501),b=r(b,p,f,w,u[i+13],5,2850285829),w=r(w,b,p,f,u[i+2],9,4243563512),f=r(f,w,b,p,u[i+7],14,1735328473),b=l(b,p=r(p,f,w,b,u[i+12],20,2368359562),f,w,u[i+5],4,4294588738),w=l(w,b,p,f,u[i+8],11,2272392833),f=l(f,w,b,p,u[i+11],16,1839030562),p=l(p,f,w,b,u[i+14],23,4259657740),b=l(b,p,f,w,u[i+1],4,2763975236),w=l(w,b,p,f,u[i+4],11,1272893353),f=l(f,w,b,p,u[i+7],16,4139469664),p=l(p,f,w,b,u[i+10],23,3200236656),b=l(b,p,f,w,u[i+13],4,681279174),w=l(w,b,p,f,u[i+0],11,3936430074),f=l(f,w,b,p,u[i+3],16,3572445317),p=l(p,f,w,b,u[i+6],23,76029189),b=l(b,p,f,w,u[i+9],4,3654602809),w=l(w,b,p,f,u[i+12],11,3873151461),f=l(f,w,b,p,u[i+15],16,530742520),b=o(b,p=l(p,f,w,b,u[i+2],23,3299628645),f,w,u[i+0],6,4096336452),w=o(w,b,p,f,u[i+7],10,1126891415),f=o(f,w,b,p,u[i+14],15,2878612391),p=o(p,f,w,b,u[i+5],21,4237533241),b=o(b,p,f,w,u[i+12],6,1700485571),w=o(w,b,p,f,u[i+3],10,2399980690),f=o(f,w,b,p,u[i+10],15,4293915773),p=o(p,f,w,b,u[i+1],21,2240044497),b=o(b,p,f,w,u[i+8],6,1873313359),w=o(w,b,p,f,u[i+15],10,4264355552),f=o(f,w,b,p,u[i+6],15,2734768916),p=o(p,f,w,b,u[i+13],21,1309151649),b=o(b,p,f,w,u[i+4],6,4149444226),w=o(w,b,p,f,u[i+11],10,3174756917),f=o(f,w,b,p,u[i+2],15,718787259),p=o(p,f,w,b,u[i+9],21,3951481745),b=a(b,m),p=a(p,s),f=a(f,d),w=a(w,g);return(c(b)+c(p)+c(f)+c(w)).toLowerCase()}(e.trim().toLowerCase())+".jpg?s="+t)}),r.a.createElement("div",{className:"w3-third w3-container"},r.a.createElement("button",{className:"w3-button w3-block w3-ripple w3-teal w3-round-xxlarge w3-xlarge w3-margin-top w3-margin-bottom",onClick:this.addPlayer},"Add player"),r.a.createElement(S,null)),r.a.createElement("div",{className:"w3-third w3-container"},r.a.createElement(k,null)));var e,t}}]),t}(n.Component),_={addPlayerToStore:function(e){return{type:"ADD_PLAYER",payload:{player:e}}}},T=Object(c.b)(null,_)(A),L=a(4),D=a(69),R=a(44),Y=a(70),G=a.n(Y),I=a(73),$=a(13),F={players:[],games:[]},M={key:"root",storage:G.a,whitelist:["bgg"]},B=Object(L.c)({bgg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(console.log("action.type=",t.type),console.log("action.type=",t.payload),t.type){case"ADD_PLAYER":return Object($.a)(e,function(e){e.players.push(t.payload.player)});case"DELETE_PLAYER":return Object($.a)(e,function(e){e.players=e.players.filter(function(e){return e.id!==t.payload.playerId})});case"UPDATE_PLAYER":return Object($.a)(e,function(e){e.players=e.players.map(function(e){return e.id!==t.payload.playerId?e:Object(I.a)({},e,{name:t.payload.name,bggName:t.payload.bggName})})});case"FETCH_PLAYER_GAMES":return Object($.a)(e,function(e){e.games=t.payload});default:return e}}}),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d,H=Object(L.e)(Object(R.a)(M,B),U(Object(L.a)(D.a))),J=Object(R.b)(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,{store:H},r.a.createElement(u.a,{loading:null,persistor:J},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,a){e.exports=a(128)},97:function(e,t){},99:function(e,t){}},[[74,1,2]]]);
//# sourceMappingURL=main.3afcd6e4.chunk.js.map