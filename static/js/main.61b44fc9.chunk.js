(this.webpackJsonpbgg=this.webpackJsonpbgg||[]).push([[0],{100:function(e){e.exports=JSON.parse('{"a":"bgg","b":"0.2.1"}')},181:function(e,n){},183:function(e,n){},213:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t(0),i=t.n(r),c=t(10),l=t.n(c),o=t(13),s=t(146),u=t(288),d=t(145),m=t(132),g=t(16),j=t(268),b=t(292),p=t(285),f=t(286),h=t(58),x=t(267),O=t(287),y=t(277),v=t(139),w=t.n(v),N=t(140),C=t.n(N),I=t(141),S=t.n(I),T=t(142),P=t.n(T),k=t(138),A=t.n(k),G=t(147),E=function(){return Object(a.jsx)(G.a,{children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(h.a,{variant:"h6",children:"Introduction"}),Object(a.jsx)(h.a,{variant:"body1",children:"Starting during a course, learning react"}),Object(a.jsx)(h.a,{variant:"h6",children:"Players page"}),Object(a.jsx)(h.a,{variant:"body1",children:"Explanation tbd"}),Object(a.jsx)(h.a,{variant:"h6",children:"Game page"}),Object(a.jsx)(h.a,{variant:"body1",children:"Explanation tbd"}),Object(a.jsx)(h.a,{variant:"h6",children:"Party page"}),Object(a.jsx)(h.a,{variant:"body1",children:"Explanation tbd"})]})})},F=t(57),R=t.n(F),B=t(98),D=t(99),_=t(75),M=t.n(_),$=t(136),L=t.n($),W="UPDATE_PARTY",H="UPDATE_GAMES_FILTER",z="ADD_PLAYER",Y="DELETE_PLAYER",J="UPDATE_PLAYER",U="FETCH_PLAYER_GAMES",V=function(e,n,t){return{type:"FETCH_PLAYER_GAMES",payload:{playerId:e,ownership:n,games:t}}},X=function(e,n){var t=[];return Object(D.parseString)(e.data,(function(e,a){t=a.items.item.map((function(e,t){return{gameId:e.$.objectid,playerId:n,status:e.status[0].$}}))})),t};function q(e,n,t){return-1===t.slice(n+1).findIndex((function(n,t,a){return n.gameId===e.gameId}))}var K=t(289),Q=Object(j.a)((function(e){return Object(b.a)({form:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1)},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})})),Z={updatePartyToStore:function(e){return console.log("updatePartyToStore !!!"),{type:W,payload:{party:e}}}},ee=Object(o.b)((function(e,n){return{party:e.bgg.party}}),Z)((function(e){var n=e.party,t=e.updatePartyToStore,r=Q(),c=i.a.useState(n.nbPlayers),l=Object(g.a)(c,2),o=l[0],s=l[1],u=i.a.useState(n.minAge),d=Object(g.a)(u,2),m=d[0],j=d[1],b=i.a.useRef(!0);return i.a.useEffect((function(){return b.current?void(b.current=!1):void t({nbPlayers:o,minAge:m})}),[o,m,t]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,{elevation:3,className:r.form,children:[Object(a.jsx)(K.a,{type:"number",label:"Number of players",value:o,onChange:function(e){return s(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:r.formControl}),Object(a.jsx)(K.a,{type:"number",label:"Age of youngest player",value:m,onChange:function(e){return j(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:r.formControl})]})})})),ne=t(22),te=(Object(ne.a)((function(e){return e.bgg.ownership.reduce((function(n,t){if("1"===t.status.own){var a=e.bgg.games.find((function(e){return e.id===t.gameId}));a&&!a.extends&&n.push({id:t.gameId,name:a.name})}return n}),[]).sort((function(e,n){return e.name.localeCompare(n.name)})).map((function(e){return e.id})).filter(oe)}),(function(e){return e})),Object(ne.a)((function(e,n){return e.bgg.ownership.reduce((function(t,a){if(("-1"===n.status||"0"===n.status&&"1"===a.status.own||"1"===n.status&&"1"===a.status.wishlist)&&("0"===n.playerId||n.playerId===a.playerId)){var r=e.bgg.games.find((function(e){return e.id===a.gameId}));r&&!r.extends&&t.push({id:a.gameId,name:r.name})}return t}),[]).sort((function(e,n){return e.name.localeCompare(n.name)})).map((function(e){return e.id})).filter(oe)}),(function(e){return e}))),ae=(Object(ne.a)((function(e){return e.bgg.ownership.reduce((function(e,n){return"1"!==n.status.own&&e.push(n.gameId),e}),[])}),(function(e){return e})),Object(ne.a)((function(e){return e.bgg.ownership.reduce((function(n,t){if("1"===t.status.own){var a=e.bgg.games.find((function(e){return e.id===t.gameId}));a&&!a.extends&&n.push({id:t.gameId,name:a.name,min:a.min,max:a.max,minage:a.minage})}return n}),[])}),(function(e){return e})),function(e,n){return e.bgg.games.filter((function(e){return e.extends&&void 0!==e.extends.find((function(e){return e===n.id}))})).map((function(e){return{id:e.id,name:e.name,min:e.min,max:e.max,thumbnail:e.thumbnail}}))}),re=Object(ne.a)((function(e,n){return e.bgg.games.find((function(e){return e.id===n.id}))}),ae,(function(e,n){return{name:e.name,thumbnail:e.thumbnail,min:e.min,max:e.max,minAge:e.minage,extensions:n}})),ie=Object(ne.a)((function(e,n){return e.bgg.games.find((function(e){return e.id===n.id}))}),ae,(function(e,n){var t=e.bgg.ownership.filter((function(e){return e.gameId===n.id&&"1"===e.status.own})).map((function(e){return e.playerId}));return e.bgg.players.filter((function(e){return t.find((function(n){return n===e.id}))}))}),(function(e,n,t){return e?{name:e.name,thumbnail:e.thumbnail,image:e.image,min:e.min,max:e.max,minage:e.minage,description:e.description,extensions:n,owners:t,extends:e.extends}:null})),ce=Object(ne.a)((function(e){var n=e.bgg.party.nbPlayers,t=e.bgg.party.minAge;return e.bgg.ownership.reduce((function(a,r){if("1"===r.status.own){var i=e.bgg.games.find((function(e){return e.id===r.gameId}));i&&parseInt(i.min)<=n&&n<=parseInt(i.max)&&t<=parseInt(i.minage)&&(a.push(r.gameId),r.extends&&r.extends.length>0&&a.push(r.extends[0]))}return a}),[]).filter(oe)}),(function(e){return e})),le=Object(ne.a)((function(e,n){return e.bgg.party.NbPlayers}),(function(e){return e}));Object(ne.a)((function(e,n){return e.bgg.party.minAge}),(function(e){return e}));function oe(e,n,t){return-1===t.slice(n+1).findIndex((function(n,t,a){return n===e}))}var se=i.a.createContext({modalGameId:"0",setModalGameId:function(){}});Object(o.b)((function(e,n){return{game:re(e,n),nbPlayers:le(e,n)}}),null)((function(e){var n=e.id,t=e.game,r=e.odd,c=e.nbPlayers;if(!t)return null;var l="bgg-even";r&&(l="bgg-odd");var o=parseInt(t.min),s=parseInt(t.max),u="w3-blue",d="w3-blue";return c===o&&c===s&&(u=d="w3-green"),(c<o||c>s)&&(u=d="w3-red"),Object(a.jsx)(se.Consumer,{children:function(e){e.modalGameId;var r=e.setModalGameId;return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("div",{className:"w3-bar "+l,style:{display:"flex",flexDirection:"row",minHeight:"100px"},children:[Object(a.jsx)("div",{className:"w3-padding-small",style:{flex:"0 1 100px"},onClick:function(){console.log("GameRow setModalGameId:",n),r(n)},children:Object(a.jsx)("img",{alt:"thumbnail",src:t.thumbnail,className:"w3-circle",style:{width:"100px",height:"75px"}})}),Object(a.jsx)("div",{className:"                 w3-large w3-margin-top",style:{flex:"1 1 auto"},children:t.name}),Object(a.jsx)("div",{className:"w3-padding-small w3-large w3-margin-top w3-center",style:{flex:"0 1 55px"},children:Object(a.jsx)("span",{children:t.minAge})}),Object(a.jsx)("div",{className:"w3-padding-small w3-large w3-margin-top w3-center",style:{flex:"0 1 55px"},children:Object(a.jsx)("span",{className:u,children:t.min})}),Object(a.jsx)("div",{className:"w3-padding-small w3-large w3-margin-top w3-center",style:{flex:"0 1 55px"},children:Object(a.jsx)("span",{className:d,children:t.max})})]}),t.extensions&&t.extensions.map((function(e,n){var t="bgg-extension-even";return 1&n&&(t="bgg-extension-odd"),Object(a.jsxs)("div",{className:"w3-bar "+l+" "+t,style:{display:"flex",flexDirection:"row",minHeight:"75px"},children:[Object(a.jsx)("div",{className:"w3-padding-small",style:{flex:"0 1 116px"},onClick:function(){console.log("GameRow extension setModalGame:",e.id),r(e.id)},children:Object(a.jsx)("img",{alt:"thumbnail",src:e.thumbnail,className:"w3-circle",style:{width:"50px",height:"37px",alignSelf:"center"}})}),Object(a.jsxs)("div",{className:"                 w3-large w3-margin-top",style:{flex:"1 1 auto"},children:[Object(a.jsx)("i",{className:"fas fa-level-up-alt fa-rotate-90"})," ",e.name]}),Object(a.jsx)("div",{className:"w3-padding-small w3-small w3-margin-top w3-center",style:{flex:"0 1 55px"}}),Object(a.jsx)("div",{className:"w3-padding-small w3-small w3-margin-top w3-center",style:{flex:"0 1 55px"},children:e.min}),Object(a.jsx)("div",{className:"w3-padding-small w3-small w3-margin-top w3-center",style:{flex:"0 1 55px"},children:e.max})]},n)}))]})}})}));var ue=t(273),de=t(275),me=t(270),ge=t(269),je=t(272),be=t(274),pe=t(216),fe=t(271),he=Object(j.a)((function(e){return Object(b.a)({avatarCell:{display:"flex",alignItems:"center"},gameName:{paddingLeft:e.spacing(1)}})}));var xe=Object(o.b)((function(e,n){return{game:re(e,n),nbPlayers:le(e,n)}}),null)((function(e){var n=e.id,t=e.game,r=(e.odd,e.nbPlayers),c=he();if(!t)return null;var l=parseInt(t.min),o=parseInt(t.max);return r===l&&r===o&&"w3-green",(r<l||r>o)&&"w3-red",Object(a.jsx)(se.Consumer,{children:function(e){e.modalGameId;var r=e.setModalGameId;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(ge.a,{children:[Object(a.jsxs)(me.a,{component:"th",scope:"row",className:c.avatarCell,children:[Object(a.jsx)(pe.a,{src:t.thumbnail,variant:"rounded",onClick:function(){r(n)}}),t.extensions&&t.extensions.length>0&&Object(a.jsx)(fe.a,{children:t.extensions.map((function(e,n){return Object(a.jsx)(pe.a,{alt:e.name,src:e.thumbnail,onClick:function(){r(e.id)}})}))}),Object(a.jsx)(h.a,{variant:"h6",className:c.gameName,children:t.name})]}),Object(a.jsx)(me.a,{align:"right",children:t.minAge}),Object(a.jsx)(me.a,{align:"right",children:t.min}),Object(a.jsx)(me.a,{align:"right",children:t.max})]},n)})}})})),Oe=Object(j.a)((function(e){return Object(b.a)({tableHead:{backgroundColor:e.palette.primary.main},tableHeadRowCell:{color:"white"}})}));var ye=function(e){var n=e.gameIds,t=Oe();return Object(a.jsx)(je.a,{component:G.a,children:Object(a.jsxs)(ue.a,{size:"small",children:[Object(a.jsx)(be.a,{className:t.tableHead,children:Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(me.a,{className:t.tableHeadRowCell,children:Object(a.jsxs)(h.a,{variant:"h6",children:["Name (",n.length,")"]})}),Object(a.jsx)(me.a,{className:t.tableHeadRowCell,align:"right",children:"Age"}),Object(a.jsx)(me.a,{className:t.tableHeadRowCell,align:"right",children:"min"}),Object(a.jsx)(me.a,{className:t.tableHeadRowCell,align:"right",children:"max"})]})}),Object(a.jsx)(de.a,{children:n.map((function(e,n){return Object(a.jsx)(xe,{id:e,odd:1&n},e)}))})]})})};var ve=Object(o.b)((function(e,n){return{gameIds:ce(e)}}),null)((function(e){var n=e.gameIds;return Object(a.jsx)(ye,{gameIds:n})})),we=0,Ne=1,Ce=2,Ie=3;var Se=Object(o.b)((function(e,n){return{gameIds:te(e,n)}}),null)((function(e){var n=e.gameIds;return Object(a.jsx)(ye,{gameIds:n})})),Te=t(293),Pe=Object(j.a)((function(e){return Object(b.a)({form:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1)},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})})),ke={updateGamesFilterToStore:function(e){return console.log("updateGamesFilterToStore !!!"),{type:H,payload:{gamesFilter:e}}}},Ae=Object(o.b)((function(e,n){return{players:e.bgg.players,gamesFilter:e.bgg.gamesFilter}}),ke)((function(e){var n=e.players,t=e.gamesFilter,r=e.updateGamesFilterToStore,c=Pe(),l=i.a.useState(t.selectedPlayerId),o=Object(g.a)(l,2),s=o[0],u=o[1],d=i.a.useState(t.filterStatus),m=Object(g.a)(d,2),j=m[0],b=m[1],p=i.a.useRef(!0);return i.a.useEffect((function(){return p.current?void(p.current=!1):void r({selectedPlayerId:s,filterStatus:j})}),[s,j,r]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(G.a,{elevation:3,className:c.form,children:[n.length>1&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(K.a,{select:!0,label:"Owner",value:s,onChange:function(e){u(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:c.formControl,children:[Object(a.jsx)(Te.a,{value:"0",children:"All"},"0"),n.map((function(e){return Object(a.jsx)(Te.a,{value:e.id,children:e.name},e.id)}))]})}),1===n.length&&Object(a.jsx)("span",{children:"one owner no filter"}),n.length>0&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(K.a,{select:!0,label:"Game status",value:j,onChange:function(e){b(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:c.formControl,children:[Object(a.jsx)(Te.a,{value:"-1",children:"All"},"-1"),Object(a.jsx)(Te.a,{value:"0",children:"Owned"},"0"),Object(a.jsx)(Te.a,{value:"1",children:"Wished"},"1")]})})]}),n.length>0&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Se,{playerId:s,status:j})})]})})),Ge=t(291);function Ee(e,n){return n=n||80,"https://www.gravatar.com/avatar/"+function(e){function n(e,n){return e<<n|e>>>32-n}function t(e,n){var t,a,r,i,c;return r=2147483648&e,i=2147483648&n,c=(1073741823&e)+(1073741823&n),(t=1073741824&e)&(a=1073741824&n)?2147483648^c^r^i:t|a?1073741824&c?3221225472^c^r^i:1073741824^c^r^i:c^r^i}function a(e,a,r,i,c,l,o){return e=t(e,t(t(function(e,n,t){return e&n|~e&t}(a,r,i),c),o)),t(n(e,l),a)}function r(e,a,r,i,c,l,o){return e=t(e,t(t(function(e,n,t){return e&t|n&~t}(a,r,i),c),o)),t(n(e,l),a)}function i(e,a,r,i,c,l,o){return e=t(e,t(t(function(e,n,t){return e^n^t}(a,r,i),c),o)),t(n(e,l),a)}function c(e,a,r,i,c,l,o){return e=t(e,t(t(function(e,n,t){return n^(e|~t)}(a,r,i),c),o)),t(n(e,l),a)}function l(e){var n,t="",a="";for(n=0;n<=3;n++)t+=(a="0"+(e>>>8*n&255).toString(16)).substr(a.length-2,2);return t}var o,s,u,d,m,g,j,b,p,f;for(o=function(e){for(var n,t=e.length,a=t+8,r=16*((a-a%64)/64+1),i=Array(r-1),c=0,l=0;l<t;)c=l%4*8,i[n=(l-l%4)/4]=i[n]|e.charCodeAt(l)<<c,l++;return c=l%4*8,i[n=(l-l%4)/4]=i[n]|128<<c,i[r-2]=t<<3,i[r-1]=t>>>29,i}(e=function(e){e=e.replace(/rn/g,"n");for(var n="",t=0;t<e.length;t++){var a=e.charCodeAt(t);a<128?n+=String.fromCharCode(a):a>127&&a<2048?(n+=String.fromCharCode(a>>6|192),n+=String.fromCharCode(63&a|128)):(n+=String.fromCharCode(a>>12|224),n+=String.fromCharCode(a>>6&63|128),n+=String.fromCharCode(63&a|128))}return n}(e)),j=1732584193,b=4023233417,p=2562383102,f=271733878,s=0;s<o.length;s+=16)u=j,d=b,m=p,g=f,j=a(j,b,p,f,o[s+0],7,3614090360),f=a(f,j,b,p,o[s+1],12,3905402710),p=a(p,f,j,b,o[s+2],17,606105819),b=a(b,p,f,j,o[s+3],22,3250441966),j=a(j,b,p,f,o[s+4],7,4118548399),f=a(f,j,b,p,o[s+5],12,1200080426),p=a(p,f,j,b,o[s+6],17,2821735955),b=a(b,p,f,j,o[s+7],22,4249261313),j=a(j,b,p,f,o[s+8],7,1770035416),f=a(f,j,b,p,o[s+9],12,2336552879),p=a(p,f,j,b,o[s+10],17,4294925233),b=a(b,p,f,j,o[s+11],22,2304563134),j=a(j,b,p,f,o[s+12],7,1804603682),f=a(f,j,b,p,o[s+13],12,4254626195),p=a(p,f,j,b,o[s+14],17,2792965006),j=r(j,b=a(b,p,f,j,o[s+15],22,1236535329),p,f,o[s+1],5,4129170786),f=r(f,j,b,p,o[s+6],9,3225465664),p=r(p,f,j,b,o[s+11],14,643717713),b=r(b,p,f,j,o[s+0],20,3921069994),j=r(j,b,p,f,o[s+5],5,3593408605),f=r(f,j,b,p,o[s+10],9,38016083),p=r(p,f,j,b,o[s+15],14,3634488961),b=r(b,p,f,j,o[s+4],20,3889429448),j=r(j,b,p,f,o[s+9],5,568446438),f=r(f,j,b,p,o[s+14],9,3275163606),p=r(p,f,j,b,o[s+3],14,4107603335),b=r(b,p,f,j,o[s+8],20,1163531501),j=r(j,b,p,f,o[s+13],5,2850285829),f=r(f,j,b,p,o[s+2],9,4243563512),p=r(p,f,j,b,o[s+7],14,1735328473),j=i(j,b=r(b,p,f,j,o[s+12],20,2368359562),p,f,o[s+5],4,4294588738),f=i(f,j,b,p,o[s+8],11,2272392833),p=i(p,f,j,b,o[s+11],16,1839030562),b=i(b,p,f,j,o[s+14],23,4259657740),j=i(j,b,p,f,o[s+1],4,2763975236),f=i(f,j,b,p,o[s+4],11,1272893353),p=i(p,f,j,b,o[s+7],16,4139469664),b=i(b,p,f,j,o[s+10],23,3200236656),j=i(j,b,p,f,o[s+13],4,681279174),f=i(f,j,b,p,o[s+0],11,3936430074),p=i(p,f,j,b,o[s+3],16,3572445317),b=i(b,p,f,j,o[s+6],23,76029189),j=i(j,b,p,f,o[s+9],4,3654602809),f=i(f,j,b,p,o[s+12],11,3873151461),p=i(p,f,j,b,o[s+15],16,530742520),j=c(j,b=i(b,p,f,j,o[s+2],23,3299628645),p,f,o[s+0],6,4096336452),f=c(f,j,b,p,o[s+7],10,1126891415),p=c(p,f,j,b,o[s+14],15,2878612391),b=c(b,p,f,j,o[s+5],21,4237533241),j=c(j,b,p,f,o[s+12],6,1700485571),f=c(f,j,b,p,o[s+3],10,2399980690),p=c(p,f,j,b,o[s+10],15,4293915773),b=c(b,p,f,j,o[s+1],21,2240044497),j=c(j,b,p,f,o[s+8],6,1873313359),f=c(f,j,b,p,o[s+15],10,4264355552),p=c(p,f,j,b,o[s+6],15,2734768916),b=c(b,p,f,j,o[s+13],21,1309151649),j=c(j,b,p,f,o[s+4],6,4149444226),f=c(f,j,b,p,o[s+11],10,3174756917),p=c(p,f,j,b,o[s+2],15,718787259),b=c(b,p,f,j,o[s+9],21,3951481745),j=t(j,u),b=t(b,d),p=t(p,m),f=t(f,g);return(l(j)+l(b)+l(p)+l(f)).toLowerCase()}(e.trim().toLowerCase())+".jpg?d=identicon&s="+n}var Fe=t(137),Re=t.n(Fe),Be=t(276),De=t(278),_e=t(279),Me=Object(j.a)((function(e){return Object(b.a)({closeButton:{color:e.palette.secondary.main},dialogTitleRoot:{backgroundColor:e.palette.primary.main},dialogContent:{backgroundColor:e.palette.primary.light},dialogActions:{backgroundColor:e.palette.primary.main},dialogTitle:{display:"flex",flexDirection:"row",alignItems:"center",color:"white"},dialogTitleName:{flexGrow:1,paddingLeft:e.spacing(1)}})})),$e=Object(o.b)((function(e,n){return{game:ie(e,n)}}),null)((function(e){var n=e.id,t=e.game,r=e.setModalGameId,i=Me();if(!t)return null;console.log(JSON.stringify(t,null,2));var c=function(){return t.min===t.max&&"1"===t.min?"Solo game":t.min===t.max&&"2"===t.min?"Duel game":t.min===t.max?"Exactly ".concat(t.min," players"):"Number of players : from ".concat(t.min," to ").concat(t.max)},l=function(){return t.owners?t.owners.map((function(e,n){return Object(a.jsx)(o,{owner:e},n)})):""},o=function(e){var n=e.owner,t=n.email?Ee(n.email,30):null;return t?Object(a.jsx)("img",{alt:"gravatar",src:t,className:"w3-bar-item w3-circle",style:{width:"30px"}}):!t&&n.thumbnail?Object(a.jsx)("img",{alt:"thumbnail",src:n.thumbnail,className:"w3-bar-item w3-circle",style:{width:"30px"}}):""};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Be.a,{className:i.dialogTitleRoot,children:Object(a.jsxs)("div",{className:i.dialogTitle,children:[Object(a.jsx)(pe.a,{src:t.thumbnail,variant:"rounded"}),Object(a.jsx)(h.a,{variant:"h6",className:i.dialogTitleName,children:t.name}),Object(a.jsx)(y.a,{className:i.closeButton,onClick:function(){r("0")},children:Object(a.jsx)(Re.a,{})})]})}),Object(a.jsxs)(De.a,{className:i.dialogContent,children:[Object(a.jsx)(h.a,{variant:"h6",children:Object(a.jsx)(c,{})}),Object(a.jsxs)(h.a,{variant:"h6",children:["Minimum age: ",t.minage]}),Object(a.jsx)(l,{}),Object(a.jsx)(h.a,{variant:"body1",style:{whiteSpace:"pre-line"},children:t.description}),Object(a.jsx)("img",{src:t.image,alt:"image illustrating "+t.name,width:"100%"})]}),Object(a.jsxs)(_e.a,{className:i.dialogActions,children:[Object(a.jsx)("p",{children:Object(a.jsx)("a",{href:"https://boardgamegeek.com/boardgame/"+n,children:"View on boardgamegeek.com"})}),Object(a.jsx)("p",{children:Object(a.jsx)("a",{href:"https://melodice.org/playlist/"+t.name,children:"Melodice.org"})})]})]})})),Le=function(){return Object(a.jsx)(se.Consumer,{children:function(e){var n=e.modalGameId,t=e.setModalGameId;return Object(a.jsx)(Ge.a,{open:"0"!==n,children:Object(a.jsx)($e,{id:n,setModalGameId:t})})}})},We=t(280),He=t(281),ze=t(284),Ye=t(283),Je=t(282),Ue=Object(j.a)((function(e){return Object(b.a)({form:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1)},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})})),Ve={updatePlayerToStore:function(e,n){return console.log("updatePlayerToStore",e,JSON.stringify(n,null,2)),{type:J,payload:{playerId:e,playerData:n}}},deletePlayerFromStore:function(e){return{type:Y,payload:{playerId:e}}},fetchPlayerGames:function(e){return function(){var n=Object(B.a)(R.a.mark((function n(t,a){var r,i;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("fetchPlayerGames",e.id,e.bggName),r=[],i=[],n.next=5,M()("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e.bggName)).then(function(){var n=Object(B.a)(R.a.mark((function n(c){var l,o,s,u;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return 202===c.code?console.log("we should retry"):r=X(c,e.id),n.next=3,M.a.get("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e.bggName));case 3:if(n.sent,i=r.filter(q),l=a().bgg.games.map((function(e){return e.id})),!((o=(o=i.map((function(e){return e.gameId}))).filter((function(e){return void 0===l.find((function(n){return n===e}))}))).length>0)){n.next=15;break}return s=(s=o.reduce((function(e,n){return e+"".concat(n,",")}),"")).slice(0,s.length-1),n.next=13,M.a.get("https://www.boardgamegeek.com/xmlapi2/thing?id=".concat(s));case 13:u=n.sent,Object(D.parseString)(u.data,(function(e,n){r=n.items.item.map((function(e,n){var t={id:e.$.id,type:e.$.type,name:e.name[0].$.value,minage:e.minage[0].$.value,min:e.minplayers[0].$.value,max:e.maxplayers[0].$.value,minplaytime:e.minplaytime[0].$.value,maxplaytime:e.maxplaytime[0].$.value,playingtime:e.playingtime[0].$.value,image:e.image[0],thumbnail:e.thumbnail[0],description:L.a.decode(e.description[0])};return"boardgameexpansion"===t.type&&(t.extends=e.link.reduce((function(e,n){return"boardgameexpansion"===n.$.type&&e.push(n.$.id),e}),[])),t}))}));case 15:t(V(e.id,i,r));case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(e)})).then((function(){}));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},Xe=Object(o.b)(null,Ve)((function(e){var n=e.player,t=e.updatePlayerToStore,r=e.deletePlayerFromStore,c=e.fetchPlayerGames,l=Ue(),o=i.a.useState(!1),s=Object(g.a)(o,2),u=s[0],d=s[1],m=i.a.useState(n.name),j=Object(g.a)(m,2),b=j[0],p=j[1],f=i.a.useState(n.bggName),h=Object(g.a)(f,2),x=h[0],O=h[1],y=i.a.useState(n.age),v=Object(g.a)(y,2),w=v[0],N=v[1],C=i.a.useState(n.email),I=Object(g.a)(C,2),S=I[0],T=I[1],P=i.a.useMemo((function(){return S?Ee(S,85):null}),[S]);return Object(a.jsxs)(a.Fragment,{children:[!u&&Object(a.jsxs)(We.a,{raised:!0,children:[Object(a.jsx)(He.a,{title:n.bggName?n.bggName:n.name?n.name:"no name",subheader:n.name?n.name:"",avatar:Object(a.jsx)(pe.a,{src:P||n.thumbnail}),action:Object(a.jsx)(Je.a,{size:"small",onClick:function(){return r(n.id)},children:"Delete"})}),Object(a.jsx)(Ye.a,{children:n.age&&Object(a.jsxs)("p",{children:["Age : ",n.age]})}),Object(a.jsxs)(ze.a,{children:[Object(a.jsx)(Je.a,{size:"small",onClick:function(){return d(!0)},children:"Edit"}),Object(a.jsx)(Je.a,{size:"small",onClick:function(){return c(n)},children:"Fetch"})]})]}),u&&Object(a.jsxs)(We.a,{raised:!0,children:[Object(a.jsx)(He.a,{title:n.bggName?n.bggName:n.name?n.name:"no name",subheader:n.name?n.name:"",avatar:Object(a.jsx)(pe.a,{src:P||n.thumbnail})}),Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(K.a,{type:"text",label:"BGG login",value:x,onChange:function(e){return O(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:l.formControl,required:!0}),Object(a.jsx)(K.a,{type:"text",label:"Name",value:b,onChange:function(e){return p(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:l.formControl}),Object(a.jsx)(K.a,{type:"text",label:"Email",value:S,onChange:function(e){return T(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:l.formControl}),Object(a.jsx)(K.a,{type:"number",label:"Age",value:w,onChange:function(e){return N(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:l.formControl})]}),Object(a.jsxs)(ze.a,{children:[Object(a.jsx)(Je.a,{size:"small",color:"inherit",onClick:function(){p(n.name),O(n.bggName),N(n.age),T(n.email),d(!1)},style:{marginLeft:"auto"},children:"Cancel"}),Object(a.jsx)(Je.a,{size:"small",color:"secondary",variant:"contained",onClick:function(){t(n.id,{name:b,bggName:x,age:w,email:S}),d(!1)},children:"Valid"})]})]})]})})),qe=Object(j.a)((function(e){return Object(b.a)({player:{marginBottom:e.spacing(2)},players:{"&:last-child":{marginTop:e.spacing(2)}}})})),Ke=Object(o.b)((function(e,n){return{players:e.bgg.players}}),null)((function(e){var n=qe();return Object(a.jsx)("div",{className:n.players,children:e.players.map((function(e){return Object(a.jsx)("div",{className:n.player,children:Object(a.jsx)(Xe,{player:e})},e.id)}))})})),Qe=t(100),Ze=Object(j.a)((function(e){return Object(b.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{top:"auto",bottom:0,"& > div":{alignItems:"flex-start"}},grow:{flexGrow:1},canvasesContainer:{position:"absolute"},fab:{bottom:e.spacing(2),right:e.spacing(2),top:"auto",left:"auto",position:"fixed",zIndex:1500}})})),en={addPlayerToStore:function(e){return{type:z,payload:{player:e}}}},nn=Object(o.b)(null,en)((function(e){var n=e.addPlayerToStore,t=Ze(),i=Object(r.useState)("0"),c=Object(g.a)(i,2),l=c[0],o=c[1],s=Object(r.useState)(we),u=Object(g.a)(s,2),d=u[0],m=u[1];return Object(a.jsxs)(se.Provider,{value:{modalGameId:l,setModalGameId:o},children:[Object(a.jsx)(Le,{}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p.a,{id:"topBar",position:"static",children:Object(a.jsx)(f.a,{children:Object(a.jsx)(h.a,{variant:"h6",className:t.title,children:"".concat(Qe.a," - ").concat(Qe.b)})})}),Object(a.jsxs)(x.a,{maxWidth:"sm",style:{paddingBottom:"64px"},disableGutters:!0,children:[d===we&&Object(a.jsx)("div",{style:{paddingTop:"8px"},children:Object(a.jsx)(E,{})}),d===Ne&&Object(a.jsxs)(x.a,{children:[Object(a.jsx)(O.a,{color:"secondary","aria-label":"add",onClick:function(){fetch("https://randomuser.me/api/").then((function(e){return e.json()})).then((function(e){var t=e.results[0];console.log("addPlayer testNewPlayer",t);var a={id:t.login.uuid,name:t.name.first,bggName:"",age:t.dob.age,color:"blue",fetched:!1,email:"",thumbnail:t.picture.thumbnail};n(a)}))},className:t.fab,children:Object(a.jsx)(A.a,{})}),Object(a.jsx)(Ke,{})]}),d===Ce&&Object(a.jsx)(Ae,{}),d===Ie&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee,{}),Object(a.jsx)(ve,{})]})]}),Object(a.jsx)(p.a,{id:"bottomBar",position:"fixed",color:"primary",className:t.appBar,children:Object(a.jsxs)(f.a,{children:[Object(a.jsx)("div",{className:t.grow}),Object(a.jsx)(y.a,{color:d===we?"secondary":"inherit",onClick:function(){return m(we)},children:Object(a.jsx)(w.a,{})}),Object(a.jsx)(y.a,{color:d===Ne?"secondary":"inherit",onClick:function(){return m(Ne)},children:Object(a.jsx)(C.a,{})}),Object(a.jsx)(y.a,{color:d===Ce?"secondary":"inherit",onClick:function(){return m(Ce)},children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(y.a,{color:d===Ie?"secondary":"inherit",onClick:function(){return m(Ie)},children:Object(a.jsx)(P.a,{})}),Object(a.jsx)("div",{className:t.grow})]})})]})]})})),tn=t(20),an=t(143),rn=t(101),cn=t(144),ln=t.n(cn),on=t(102),sn=t(38),un={players:[{id:1,bggName:"Bratac",email:"bratac@free.fr"},{id:2,bggName:"Wallice35",email:"wallice35@free.fr"}],ownership:[],games:[],party:{nbPlayers:2,minAge:8},gamesFilter:{selectedPlayerId:"0",filterStatus:"-1"}},dn={key:"root",storage:ln.a,whitelist:["bgg"]},mn=Object(tn.c)({bgg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case z:return Object(sn.a)(e,(function(e){e.players.push(n.payload.player)}));case Y:return Object(sn.a)(e,(function(e){e.players=e.players.filter((function(e){return e.id!==n.payload.playerId}))}));case J:return Object(sn.a)(e,(function(e){e.players=e.players.map((function(e){return e.id!==n.payload.playerId?e:Object(on.a)(Object(on.a)({},e),n.payload.playerData)}))}));case W:return Object(sn.a)(e,(function(e){e.party=n.payload.party}));case H:return Object(sn.a)(e,(function(e){e.gamesFilter=n.payload.gamesFilter}));case U:return Object(sn.a)(e,(function(e){e.games=e.games.concat(n.payload.games),e.ownership=e.ownership.filter((function(e){return e.playerId!==n.payload.playerId})).concat(n.payload.ownership)}));default:return e}}}),gn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||tn.d,jn=Object(tn.e)(Object(rn.a)(dn,mn),gn(Object(tn.a)(an.a))),bn=Object(rn.b)(jn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pn=Object(s.a)({palette:{primary:{main:"#4D774E",dark:"#164A41",light:"#9DC88D"},secondary:{main:"#F1B24A"}}},d.frFR);l.a.render(Object(a.jsx)(u.a,{theme:pn,children:Object(a.jsx)(o.a,{store:jn,children:Object(a.jsx)(m.a,{loading:null,persistor:bn,children:Object(a.jsx)(nn,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[213,1,2]]]);
//# sourceMappingURL=main.61b44fc9.chunk.js.map