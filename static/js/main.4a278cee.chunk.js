(this.webpackJsonpbgg=this.webpackJsonpbgg||[]).push([[0],{105:function(e){e.exports=JSON.parse('{"a":"bgg","b":"0.2.4"}')},186:function(e,t){},188:function(e,t){},219:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),c=n.n(i),l=n(15),o=n(151),s=n(293),u=n(150),d=n(135),m=n(295),g=n(142),j=n(136),b=n(20),p=n(297),f=n(273),h=n(299),x=n(290),O=n(291),y=n(64),v=n(272),w=n(292),N=n(282),C=n(144),I=n.n(C),S=n(145),P=n.n(S),T=n(146),F=n.n(T),k=n(147),A=n.n(k),G=n(143),E=n.n(G),R=n(152),D=n(2),B=function(){return Object(D.jsx)(R.a,{children:Object(D.jsxs)(v.a,{children:[Object(D.jsx)(y.a,{variant:"h6",children:"Introduction"}),Object(D.jsx)(y.a,{variant:"body1",children:"Starting during a course, learning react"}),Object(D.jsx)(y.a,{variant:"h6",children:"Players page"}),Object(D.jsx)(y.a,{variant:"body1",children:"Explanation tbd"}),Object(D.jsx)(y.a,{variant:"h6",children:"Game page"}),Object(D.jsx)(y.a,{variant:"body1",children:"Explanation tbd"}),Object(D.jsx)(y.a,{variant:"h6",children:"Party page"}),Object(D.jsx)(y.a,{variant:"body1",children:"Explanation tbd"})]})})},M=n(62),_=n.n(M),L=n(103),$=n(104),W=n(81),H=n.n(W),z=n(140),Y=n.n(z),J="UPDATE_PARTY",U="UPDATE_GAMES_FILTER",V="ADD_PLAYER",X="DELETE_PLAYER",q="UPDATE_PLAYER",Q="FETCH_PLAYER_GAMES",K=function(e,t,n){return{type:"FETCH_PLAYER_GAMES",payload:{playerId:e,ownership:t,games:n}}},Z=function(e,t){var n=[];return Object($.parseString)(e.data,(function(e,a){n=a.items.item.map((function(e,n){return{gameId:e.$.objectid,playerId:t,status:e.status[0].$}}))})),n};function ee(e,t,n){return-1===n.slice(t+1).findIndex((function(t,n,a){return t.gameId===e.gameId}))}var te=n(294),ne=Object(f.a)((function(e){return Object(h.a)({form:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1)},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})})),ae={updatePartyToStore:function(e){return console.log("updatePartyToStore !!!"),{type:J,payload:{party:e}}}},re=Object(l.b)((function(e,t){return{party:e.bgg.party}}),ae)((function(e){var t=e.party,n=e.updatePartyToStore,a=ne(),i=r.a.useState(t.nbPlayers),c=Object(b.a)(i,2),l=c[0],o=c[1],s=r.a.useState(t.minAge),u=Object(b.a)(s,2),d=u[0],m=u[1],g=r.a.useRef(!0);return r.a.useEffect((function(){return g.current?void(g.current=!1):void n({nbPlayers:l,minAge:d})}),[l,d,n]),Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(R.a,{elevation:3,className:a.form,children:[Object(D.jsx)(te.a,{type:"number",label:"Number of players",value:l,onChange:function(e){return o(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:a.formControl,inputProps:{min:1}}),Object(D.jsx)(te.a,{type:"number",label:"Age of youngest player",value:d,onChange:function(e){return m(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:a.formControl,inputProps:{min:0}})]})})})),ie=n(26),ce=(Object(ie.a)((function(e){return e.bgg.ownership.reduce((function(t,n){if("1"===n.status.own){var a=e.bgg.games.find((function(e){return e.id===n.gameId}));a&&!a.extends&&t.push({id:n.gameId,name:a.name})}return t}),[]).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.id})).filter(me)}),(function(e){return e})),Object(ie.a)((function(e,t){return e.bgg.ownership.reduce((function(n,a){if(("-1"===t.status||"0"===t.status&&"1"===a.status.own||"1"===t.status&&"1"===a.status.wishlist)&&("0"===t.playerId||t.playerId===a.playerId)){var r=e.bgg.games.find((function(e){return e.id===a.gameId}));r&&!r.extends&&n.push({id:a.gameId,name:r.name})}return n}),[]).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return e.id})).filter(me)}),(function(e){return e}))),le=(Object(ie.a)((function(e){return e.bgg.ownership.reduce((function(e,t){return"1"!==t.status.own&&e.push(t.gameId),e}),[])}),(function(e){return e})),Object(ie.a)((function(e){return e.bgg.ownership.reduce((function(t,n){if("1"===n.status.own){var a=e.bgg.games.find((function(e){return e.id===n.gameId}));a&&!a.extends&&t.push({id:n.gameId,name:a.name,min:a.min,max:a.max,minage:a.minage})}return t}),[])}),(function(e){return e})),function(e,t){return e.bgg.games.filter((function(e){return e.extends&&void 0!==e.extends.find((function(e){return e===t.id}))})).map((function(e){return{id:e.id,name:e.name,min:e.min,max:e.max,thumbnail:e.thumbnail}}))}),oe=Object(ie.a)((function(e,t){return e.bgg.games.find((function(e){return e.id===t.id}))}),le,(function(e,t){return{name:e.name,thumbnail:e.thumbnail,min:e.min,max:e.max,minAge:e.minage,extensions:t}})),se=Object(ie.a)((function(e,t){return e.bgg.games.find((function(e){return e.id===t.id}))}),le,(function(e,t){var n=e.bgg.ownership.filter((function(e){return e.gameId===t.id&&"1"===e.status.own})).map((function(e){return e.playerId}));return e.bgg.players.filter((function(e){return n.find((function(t){return t===e.id}))}))}),(function(e,t,n){return e?{name:e.name,thumbnail:e.thumbnail,image:e.image,min:e.min,max:e.max,minage:e.minage,description:e.description,extensions:t,owners:n,extends:e.extends}:null})),ue=Object(ie.a)((function(e){var t=e.bgg.party.nbPlayers,n=parseInt(e.bgg.party.minAge);return e.bgg.ownership.reduce((function(a,r){if("1"===r.status.own){var i=e.bgg.games.find((function(e){return e.id===r.gameId}));i&&parseInt(i.min)<=t&&t<=parseInt(i.max)&&n>=parseInt(i.minage)&&(a.push(r.gameId),r.extends&&r.extends.length>0&&a.push(r.extends[0]))}return a}),[]).filter(me)}),(function(e){return e})),de=Object(ie.a)((function(e,t){return e.bgg.party.NbPlayers}),(function(e){return e}));Object(ie.a)((function(e,t){return e.bgg.party.minAge}),(function(e){return e}));function me(e,t,n){return-1===n.slice(t+1).findIndex((function(t,n,a){return t===e}))}var ge=n(278),je=n(280),be=n(275),pe=n(274),fe=n(277),he=n(279),xe=n(222),Oe=n(276),ye=r.a.createContext({modalGameId:"0",setModalGameId:function(){}}),ve=Object(f.a)((function(e){return Object(h.a)({avatarCell:{display:"flex",alignItems:"center"},gameName:{paddingLeft:e.spacing(1)}})}));var we=Object(l.b)((function(e,t){return{game:oe(e,t),nbPlayers:de(e,t)}}),null)((function(e){var t=e.id,n=e.game,a=(e.odd,e.nbPlayers,ve());return n?Object(D.jsx)(ye.Consumer,{children:function(e){e.modalGameId;var i=e.setModalGameId;return Object(D.jsx)(r.a.Fragment,{children:Object(D.jsxs)(pe.a,{children:[Object(D.jsxs)(be.a,{component:"th",scope:"row",className:a.avatarCell,children:[Object(D.jsx)(xe.a,{src:n.thumbnail,variant:"rounded",onClick:function(){i(t)}}),n.extensions&&n.extensions.length>0&&Object(D.jsx)(Oe.a,{children:n.extensions.map((function(e,t){return Object(D.jsx)(xe.a,{alt:e.name,src:e.thumbnail,onClick:function(){i(e.id)}})}))}),Object(D.jsx)(y.a,{variant:"h6",className:a.gameName,children:n.name})]}),Object(D.jsx)(be.a,{align:"right",children:n.minAge}),Object(D.jsx)(be.a,{align:"right",children:n.min}),Object(D.jsx)(be.a,{align:"right",children:n.max})]},t)})}}):null})),Ne=Object(f.a)((function(e){return Object(h.a)({tableHead:{backgroundColor:e.palette.primary.main},tableHeadRowCell:{color:"white"}})}));var Ce=function(e){var t=e.gameIds,n=Ne();return Object(D.jsx)(fe.a,{component:R.a,children:Object(D.jsxs)(ge.a,{size:"small",children:[Object(D.jsx)(he.a,{className:n.tableHead,children:Object(D.jsxs)(pe.a,{children:[Object(D.jsx)(be.a,{className:n.tableHeadRowCell,children:Object(D.jsxs)(y.a,{variant:"h6",children:["Name (",t.length,")"]})}),Object(D.jsx)(be.a,{className:n.tableHeadRowCell,align:"right",children:"Age"}),Object(D.jsx)(be.a,{className:n.tableHeadRowCell,align:"right",children:"min"}),Object(D.jsx)(be.a,{className:n.tableHeadRowCell,align:"right",children:"max"})]})}),Object(D.jsx)(je.a,{children:t.map((function(e,t){return Object(D.jsx)(we,{id:e,odd:1&t},e)}))})]})})};var Ie=Object(l.b)((function(e,t){return{gameIds:ue(e)}}),null)((function(e){var t=e.gameIds;return Object(D.jsx)(Ce,{gameIds:t})}));Object(l.b)((function(e,t){return{game:oe(e,t),nbPlayers:de(e,t)}}),null)((function(e){var t=e.id,n=e.game,a=e.odd,i=e.nbPlayers;if(!n)return null;var c="bgg-even";a&&(c="bgg-odd");var l=parseInt(n.min),o=parseInt(n.max),s="w3-blue",u="w3-blue";return i===l&&i===o&&(s=u="w3-green"),(i<l||i>o)&&(s=u="w3-red"),Object(D.jsx)(ye.Consumer,{children:function(e){e.modalGameId;var a=e.setModalGameId;return Object(D.jsxs)(r.a.Fragment,{children:[Object(D.jsxs)("div",{className:"w3-bar "+c,style:{display:"flex",flexDirection:"row",minHeight:"100px"},children:[Object(D.jsx)("div",{className:"w3-padding-small",style:{flex:"0 1 100px"},onClick:function(){console.log("GameRow setModalGameId:",t),a(t)},children:Object(D.jsx)("img",{alt:"thumbnail",src:n.thumbnail,className:"w3-circle",style:{width:"100px",height:"75px"}})}),Object(D.jsx)("div",{className:"                 w3-large w3-margin-top",style:{flex:"1 1 auto"},children:n.name}),Object(D.jsx)("div",{className:"w3-padding-small w3-large w3-margin-top w3-center",style:{flex:"0 1 55px"},children:Object(D.jsx)("span",{children:n.minAge})}),Object(D.jsx)("div",{className:"w3-padding-small w3-large w3-margin-top w3-center",style:{flex:"0 1 55px"},children:Object(D.jsx)("span",{className:s,children:n.min})}),Object(D.jsx)("div",{className:"w3-padding-small w3-large w3-margin-top w3-center",style:{flex:"0 1 55px"},children:Object(D.jsx)("span",{className:u,children:n.max})})]}),n.extensions&&n.extensions.map((function(e,t){var n="bgg-extension-even";return 1&t&&(n="bgg-extension-odd"),Object(D.jsxs)("div",{className:"w3-bar "+c+" "+n,style:{display:"flex",flexDirection:"row",minHeight:"75px"},children:[Object(D.jsx)("div",{className:"w3-padding-small",style:{flex:"0 1 116px"},onClick:function(){console.log("GameRow extension setModalGame:",e.id),a(e.id)},children:Object(D.jsx)("img",{alt:"thumbnail",src:e.thumbnail,className:"w3-circle",style:{width:"50px",height:"37px",alignSelf:"center"}})}),Object(D.jsxs)("div",{className:"                 w3-large w3-margin-top",style:{flex:"1 1 auto"},children:[Object(D.jsx)("i",{className:"fas fa-level-up-alt fa-rotate-90"})," ",e.name]}),Object(D.jsx)("div",{className:"w3-padding-small w3-small w3-margin-top w3-center",style:{flex:"0 1 55px"}}),Object(D.jsx)("div",{className:"w3-padding-small w3-small w3-margin-top w3-center",style:{flex:"0 1 55px"},children:e.min}),Object(D.jsx)("div",{className:"w3-padding-small w3-small w3-margin-top w3-center",style:{flex:"0 1 55px"},children:e.max})]},t)}))]})}})}));var Se=Object(l.b)((function(e,t){return{gameIds:ce(e,t)}}),null)((function(e){var t=e.gameIds;return Object(D.jsx)(Ce,{gameIds:t})})),Pe=n(300),Te=Object(f.a)((function(e){return Object(h.a)({form:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1)},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})})),Fe={updateGamesFilterToStore:function(e){return console.log("updateGamesFilterToStore !!!"),{type:U,payload:{gamesFilter:e}}}},ke=Object(l.b)((function(e,t){return{players:e.bgg.players,gamesFilter:e.bgg.gamesFilter}}),Fe)((function(e){var t=e.players,n=e.gamesFilter,a=e.updateGamesFilterToStore,i=Te(),c=r.a.useState(n.selectedPlayerId),l=Object(b.a)(c,2),o=l[0],s=l[1],u=r.a.useState(n.filterStatus),d=Object(b.a)(u,2),m=d[0],g=d[1],j=r.a.useRef(!0);return r.a.useEffect((function(){return j.current?void(j.current=!1):void a({selectedPlayerId:o,filterStatus:m})}),[o,m,a]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(R.a,{elevation:3,className:i.form,children:[t.length>1&&Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(te.a,{select:!0,label:"Owner",value:o,onChange:function(e){s(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:i.formControl,children:[Object(D.jsx)(Pe.a,{value:"0",children:"All"},"0"),t.map((function(e){return Object(D.jsx)(Pe.a,{value:e.id,children:e.name},e.id)}))]})}),1===t.length&&Object(D.jsx)("span",{children:"one owner no filter"}),t.length>0&&Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(te.a,{select:!0,label:"Game status",value:m,onChange:function(e){g(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:i.formControl,children:[Object(D.jsx)(Pe.a,{value:"-1",children:"All"},"-1"),Object(D.jsx)(Pe.a,{value:"0",children:"Owned"},"0"),Object(D.jsx)(Pe.a,{value:"1",children:"Wished"},"1")]})})]}),t.length>0&&Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(Se,{playerId:o,status:m})})]})})),Ae=n(298);function Ge(e,t){return t=t||80,"https://www.gravatar.com/avatar/"+function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,a,r,i,c;return r=2147483648&e,i=2147483648&t,c=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(a=1073741824&t)?2147483648^c^r^i:n|a?1073741824&c?3221225472^c^r^i:1073741824^c^r^i:c^r^i}function a(e,a,r,i,c,l,o){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(a,r,i),c),o)),n(t(e,l),a)}function r(e,a,r,i,c,l,o){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(a,r,i),c),o)),n(t(e,l),a)}function i(e,a,r,i,c,l,o){return e=n(e,n(n(function(e,t,n){return e^t^n}(a,r,i),c),o)),n(t(e,l),a)}function c(e,a,r,i,c,l,o){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(a,r,i),c),o)),n(t(e,l),a)}function l(e){var t,n="",a="";for(t=0;t<=3;t++)n+=(a="0"+(e>>>8*t&255).toString(16)).substr(a.length-2,2);return n}var o,s,u,d,m,g,j,b,p,f;for(o=function(e){for(var t,n=e.length,a=n+8,r=16*((a-a%64)/64+1),i=Array(r-1),c=0,l=0;l<n;)c=l%4*8,i[t=(l-l%4)/4]=i[t]|e.charCodeAt(l)<<c,l++;return c=l%4*8,i[t=(l-l%4)/4]=i[t]|128<<c,i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}(e)),j=1732584193,b=4023233417,p=2562383102,f=271733878,s=0;s<o.length;s+=16)u=j,d=b,m=p,g=f,j=a(j,b,p,f,o[s+0],7,3614090360),f=a(f,j,b,p,o[s+1],12,3905402710),p=a(p,f,j,b,o[s+2],17,606105819),b=a(b,p,f,j,o[s+3],22,3250441966),j=a(j,b,p,f,o[s+4],7,4118548399),f=a(f,j,b,p,o[s+5],12,1200080426),p=a(p,f,j,b,o[s+6],17,2821735955),b=a(b,p,f,j,o[s+7],22,4249261313),j=a(j,b,p,f,o[s+8],7,1770035416),f=a(f,j,b,p,o[s+9],12,2336552879),p=a(p,f,j,b,o[s+10],17,4294925233),b=a(b,p,f,j,o[s+11],22,2304563134),j=a(j,b,p,f,o[s+12],7,1804603682),f=a(f,j,b,p,o[s+13],12,4254626195),p=a(p,f,j,b,o[s+14],17,2792965006),j=r(j,b=a(b,p,f,j,o[s+15],22,1236535329),p,f,o[s+1],5,4129170786),f=r(f,j,b,p,o[s+6],9,3225465664),p=r(p,f,j,b,o[s+11],14,643717713),b=r(b,p,f,j,o[s+0],20,3921069994),j=r(j,b,p,f,o[s+5],5,3593408605),f=r(f,j,b,p,o[s+10],9,38016083),p=r(p,f,j,b,o[s+15],14,3634488961),b=r(b,p,f,j,o[s+4],20,3889429448),j=r(j,b,p,f,o[s+9],5,568446438),f=r(f,j,b,p,o[s+14],9,3275163606),p=r(p,f,j,b,o[s+3],14,4107603335),b=r(b,p,f,j,o[s+8],20,1163531501),j=r(j,b,p,f,o[s+13],5,2850285829),f=r(f,j,b,p,o[s+2],9,4243563512),p=r(p,f,j,b,o[s+7],14,1735328473),j=i(j,b=r(b,p,f,j,o[s+12],20,2368359562),p,f,o[s+5],4,4294588738),f=i(f,j,b,p,o[s+8],11,2272392833),p=i(p,f,j,b,o[s+11],16,1839030562),b=i(b,p,f,j,o[s+14],23,4259657740),j=i(j,b,p,f,o[s+1],4,2763975236),f=i(f,j,b,p,o[s+4],11,1272893353),p=i(p,f,j,b,o[s+7],16,4139469664),b=i(b,p,f,j,o[s+10],23,3200236656),j=i(j,b,p,f,o[s+13],4,681279174),f=i(f,j,b,p,o[s+0],11,3936430074),p=i(p,f,j,b,o[s+3],16,3572445317),b=i(b,p,f,j,o[s+6],23,76029189),j=i(j,b,p,f,o[s+9],4,3654602809),f=i(f,j,b,p,o[s+12],11,3873151461),p=i(p,f,j,b,o[s+15],16,530742520),j=c(j,b=i(b,p,f,j,o[s+2],23,3299628645),p,f,o[s+0],6,4096336452),f=c(f,j,b,p,o[s+7],10,1126891415),p=c(p,f,j,b,o[s+14],15,2878612391),b=c(b,p,f,j,o[s+5],21,4237533241),j=c(j,b,p,f,o[s+12],6,1700485571),f=c(f,j,b,p,o[s+3],10,2399980690),p=c(p,f,j,b,o[s+10],15,4293915773),b=c(b,p,f,j,o[s+1],21,2240044497),j=c(j,b,p,f,o[s+8],6,1873313359),f=c(f,j,b,p,o[s+15],10,4264355552),p=c(p,f,j,b,o[s+6],15,2734768916),b=c(b,p,f,j,o[s+13],21,1309151649),j=c(j,b,p,f,o[s+4],6,4149444226),f=c(f,j,b,p,o[s+11],10,3174756917),p=c(p,f,j,b,o[s+2],15,718787259),b=c(b,p,f,j,o[s+9],21,3951481745),j=n(j,u),b=n(b,d),p=n(p,m),f=n(f,g);return(l(j)+l(b)+l(p)+l(f)).toLowerCase()}(e.trim().toLowerCase())+".jpg?d=identicon&s="+t}var Ee=n(141),Re=n.n(Ee),De=n(281),Be=n(283),Me=n(284),_e=Object(f.a)((function(e){return Object(h.a)({closeButton:{color:e.palette.secondary.main},dialogTitleRoot:{backgroundColor:e.palette.primary.main},dialogContent:{backgroundColor:e.palette.primary.light},dialogActions:{backgroundColor:e.palette.primary.main},dialogTitle:{display:"flex",flexDirection:"row",alignItems:"center",color:"white"},dialogTitleName:{flexGrow:1,paddingLeft:e.spacing(1)}})})),Le=Object(l.b)((function(e,t){return{game:se(e,t)}}),null)((function(e){var t=e.id,n=e.game,a=e.setModalGameId,r=_e();if(!n)return null;console.log(JSON.stringify(n,null,2));var i=function(){return n.min===n.max&&"1"===n.min?"Solo game":n.min===n.max&&"2"===n.min?"Duel game":n.min===n.max?"Exactly ".concat(n.min," players"):"Number of players : from ".concat(n.min," to ").concat(n.max)},c=function(){return n.owners?n.owners.map((function(e,t){return Object(D.jsx)(l,{owner:e},t)})):""},l=function(e){var t=e.owner,n=t.email?Ge(t.email,30):null;return n?Object(D.jsx)("img",{alt:"gravatar",src:n,className:"w3-bar-item w3-circle",style:{width:"30px"}}):!n&&t.thumbnail?Object(D.jsx)("img",{alt:"thumbnail",src:t.thumbnail,className:"w3-bar-item w3-circle",style:{width:"30px"}}):""};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(De.a,{className:r.dialogTitleRoot,children:Object(D.jsxs)("div",{className:r.dialogTitle,children:[Object(D.jsx)(xe.a,{src:n.thumbnail,variant:"rounded"}),Object(D.jsx)(y.a,{variant:"h6",className:r.dialogTitleName,children:n.name}),Object(D.jsx)(N.a,{className:r.closeButton,onClick:function(){a("0")},children:Object(D.jsx)(Re.a,{})})]})}),Object(D.jsxs)(Be.a,{className:r.dialogContent,children:[Object(D.jsx)(y.a,{variant:"h6",children:Object(D.jsx)(i,{})}),Object(D.jsxs)(y.a,{variant:"h6",children:["Minimum age: ",n.minage]}),Object(D.jsx)(c,{}),Object(D.jsx)(y.a,{variant:"body1",style:{whiteSpace:"pre-line"},children:n.description}),Object(D.jsx)("img",{src:n.image,alt:"image illustrating "+n.name,width:"100%"})]}),Object(D.jsxs)(Me.a,{className:r.dialogActions,children:[Object(D.jsx)("p",{children:Object(D.jsx)("a",{href:"https://boardgamegeek.com/boardgame/"+t,children:"View on boardgamegeek.com"})}),Object(D.jsx)("p",{children:Object(D.jsx)("a",{href:"https://melodice.org/playlist/"+n.name,children:"Melodice.org"})})]})]})})),$e=function(){return Object(D.jsx)(ye.Consumer,{children:function(e){var t=e.modalGameId,n=e.setModalGameId;return Object(D.jsx)(Ae.a,{open:"0"!==t,children:Object(D.jsx)(Le,{id:t,setModalGameId:n})})}})},We=n(285),He=n(286),ze=n(289),Ye=n(288),Je=n(287),Ue=Object(f.a)((function(e){return Object(h.a)({form:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1)},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})})),Ve={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"},Xe={updatePlayerToStore:function(e,t){return console.log("updatePlayerToStore",e,JSON.stringify(t,null,2)),{type:q,payload:{playerId:e,playerData:t}}},deletePlayerFromStore:function(e){return{type:X,payload:{playerId:e}}},fetchPlayerGames:function(e){return function(){var t=Object(L.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetchPlayerGames",e.id,e.bggName),r=[],i=[],t.next=5,H()("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e.bggName)).then(function(){var t=Object(L.a)(_.a.mark((function t(c){var l,o,s,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 202===c.code?console.log("we should retry"):r=Z(c,e.id),t.next=3,H.a.get("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e.bggName));case 3:if(t.sent,i=r.filter(ee),l=a().bgg.games.map((function(e){return e.id})),!((o=(o=i.map((function(e){return e.gameId}))).filter((function(e){return void 0===l.find((function(t){return t===e}))}))).length>0)){t.next=15;break}return s=(s=o.reduce((function(e,t){return e+"".concat(t,",")}),"")).slice(0,s.length-1),t.next=13,H.a.get("https://www.boardgamegeek.com/xmlapi2/thing?id=".concat(s));case 13:u=t.sent,Object($.parseString)(u.data,(function(e,t){r=t.items.item.map((function(e,t){var n={id:e.$.id,type:e.$.type,name:e.name[0].$.value,minage:e.minage[0].$.value,min:e.minplayers[0].$.value,max:e.maxplayers[0].$.value,minplaytime:e.minplaytime[0].$.value,maxplaytime:e.maxplaytime[0].$.value,playingtime:e.playingtime[0].$.value,image:e.image[0],thumbnail:e.thumbnail[0],description:Y.a.decode(e.description[0])};return"boardgameexpansion"===n.type&&(n.extends=e.link.reduce((function(e,t){return"boardgameexpansion"===t.$.type&&e.push(t.$.id),e}),[])),n}))}));case 15:n(K(e.id,i,r));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)})).then((function(){}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},qe=Object(l.b)(null,Xe)((function(e){var t=e.player,n=e.updatePlayerToStore,a=e.deletePlayerFromStore,i=e.fetchPlayerGames,c=Ue(),l=r.a.useState(!1),o=Object(b.a)(l,2),s=o[0],u=o[1],d=r.a.useState(t.name),m=Object(b.a)(d,2),g=m[0],j=m[1],p=r.a.useState(t.bggName),f=Object(b.a)(p,2),h=f[0],x=f[1],O=r.a.useState(t.age),y=Object(b.a)(O,2),v=y[0],w=y[1],N=r.a.useState(t.email),C=Object(b.a)(N,2),I=C[0],S=C[1],P=r.a.useMemo((function(){return I?Ge(I,85):null}),[I]);return Object(D.jsxs)(D.Fragment,{children:[!s&&Object(D.jsxs)(We.a,{raised:!0,children:[Object(D.jsx)(He.a,{title:t.bggName?t.bggName:t.name?t.name:"no name",subheader:t.name?t.name:"",avatar:Object(D.jsx)(xe.a,{src:P||t.thumbnail}),action:Object(D.jsx)(Je.a,{size:"small",onClick:function(){return a(t.id)},children:"Delete"})}),Object(D.jsxs)(Ye.a,{children:[t.age&&Object(D.jsxs)("p",{children:["Age : ",t.age]})," ",!!t.lastFetch&&Object(D.jsxs)("p",{children:["Last fetch:"," ",new Date(t.lastFetch).toLocaleDateString("fr-FR",Ve)]})]}),Object(D.jsxs)(ze.a,{children:[Object(D.jsx)(Je.a,{size:"small",onClick:function(){return u(!0)},children:"Edit"}),Object(D.jsx)(Je.a,{size:"small",onClick:function(){return i(t)},children:"Fetch"})]})]}),s&&Object(D.jsxs)(We.a,{raised:!0,children:[Object(D.jsx)(He.a,{title:t.bggName?t.bggName:t.name?t.name:"no name",subheader:t.name?t.name:"",avatar:Object(D.jsx)(xe.a,{src:P||t.thumbnail})}),Object(D.jsxs)(Ye.a,{children:[Object(D.jsx)(te.a,{type:"text",label:"BGG login",value:h,onChange:function(e){return x(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:c.formControl,required:!0}),Object(D.jsx)(te.a,{type:"text",label:"Name",value:g,onChange:function(e){return j(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:c.formControl}),Object(D.jsx)(te.a,{type:"text",label:"Email",value:I,onChange:function(e){return S(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:c.formControl}),Object(D.jsx)(te.a,{type:"number",label:"Age",value:v,onChange:function(e){return w(e.target.value)},helperText:"",variant:"outlined",fullWidth:!0,color:"secondary",className:c.formControl})]}),Object(D.jsxs)(ze.a,{children:[Object(D.jsx)(Je.a,{size:"small",color:"inherit",onClick:function(){j(t.name),x(t.bggName),w(t.age),S(t.email),u(!1)},style:{marginLeft:"auto"},children:"Cancel"}),Object(D.jsx)(Je.a,{size:"small",color:"secondary",variant:"contained",onClick:function(){n(t.id,{name:g,bggName:h,age:v,email:I}),u(!1)},children:"Valid"})]})]})]})})),Qe=Object(f.a)((function(e){return Object(h.a)({player:{marginBottom:e.spacing(2)},players:{"&:last-child":{marginTop:e.spacing(2)}}})})),Ke=Object(l.b)((function(e,t){return{players:e.bgg.players}}),null)((function(e){var t=Qe();return Object(D.jsx)("div",{className:t.players,children:e.players.map((function(e){return Object(D.jsx)("div",{className:t.player,children:Object(D.jsx)(qe,{player:e})},e.id)}))})})),Ze=0,et=1,tt=2,nt=3,at=n(105),rt=Object(f.a)((function(e){return Object(h.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{top:"auto",bottom:0,"& > div":{alignItems:"flex-start"}},grow:{flexGrow:1},canvasesContainer:{position:"absolute"},fab:{bottom:e.spacing(2),right:e.spacing(2),top:"auto",left:"auto",position:"fixed",zIndex:1500}})})),it={addPlayerToStore:function(e){return{type:V,payload:{player:e}}}},ct=Object(l.b)(null,it)((function(e){var t=e.addPlayerToStore,n=rt(),r=Object(a.useState)("0"),i=Object(b.a)(r,2),c=i[0],l=i[1],o=Object(a.useState)(Ze),s=Object(b.a)(o,2),u=s[0],d=s[1],m=Object(p.a)("addingPlayer",(function(){fetch("https://randomuser.me/api/").then((function(e){return e.json()})).then((function(e){var n=e.results[0];console.log("addPlayer testNewPlayer",n);var a={id:n.login.uuid,name:n.name.first,bggName:"",age:n.dob.age,color:"blue",lastFetch:null,email:"",thumbnail:n.picture.thumbnail};t(a)}))}),{enabled:!1}),g=m.isFetching,j=m.refetch;return Object(D.jsxs)(ye.Provider,{value:{modalGameId:c,setModalGameId:l},children:[Object(D.jsx)($e,{}),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(x.a,{id:"topBar",position:"static",children:Object(D.jsx)(O.a,{children:Object(D.jsx)(y.a,{variant:"h6",className:n.title,children:"".concat(at.a," - ").concat(at.b)})})}),Object(D.jsxs)(v.a,{maxWidth:"sm",style:{paddingBottom:"64px"},disableGutters:!0,children:[u===Ze&&Object(D.jsx)("div",{style:{paddingTop:"8px"},children:Object(D.jsx)(B,{})}),u===et&&Object(D.jsxs)(v.a,{children:[Object(D.jsx)(w.a,{color:"secondary","aria-label":"add",onClick:function(){j()},className:n.fab,disabled:g,children:Object(D.jsx)(E.a,{})}),Object(D.jsx)(Ke,{})]}),u===tt&&Object(D.jsx)(ke,{}),u===nt&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(re,{}),Object(D.jsx)(Ie,{})]})]}),Object(D.jsx)(x.a,{id:"bottomBar",position:"fixed",color:"primary",className:n.appBar,children:Object(D.jsxs)(O.a,{children:[Object(D.jsx)("div",{className:n.grow}),Object(D.jsx)(N.a,{color:u===Ze?"secondary":"inherit",onClick:function(){return d(Ze)},children:Object(D.jsx)(I.a,{})}),Object(D.jsx)(N.a,{color:u===et?"secondary":"inherit",onClick:function(){return d(et)},children:Object(D.jsx)(P.a,{})}),Object(D.jsx)(N.a,{color:u===tt?"secondary":"inherit",onClick:function(){return d(tt)},children:Object(D.jsx)(F.a,{})}),Object(D.jsx)(N.a,{color:u===nt?"secondary":"inherit",onClick:function(){return d(nt)},children:Object(D.jsx)(A.a,{})}),Object(D.jsx)("div",{className:n.grow})]})})]})]})})),lt=n(29),ot=n(148),st=n(106),ut=n(149),dt=n.n(ut),mt=n(63),gt=n(43),jt={players:[{id:1,bggName:"Bratac",name:"Matthias",email:"bratac@free.fr",lastFetch:null},{id:2,bggName:"Wallice35",name:"Caroline",email:"wallice35@free.fr",lastFetch:null}],ownership:[],games:[],party:{nbPlayers:2,minAge:8},gamesFilter:{selectedPlayerId:"0",filterStatus:"-1"}},bt={key:"root",storage:dt.a,whitelist:["bgg"]},pt=Object(lt.b)({bgg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(gt.a)(e,(function(e){e.players.push(t.payload.player)}));case X:return Object(gt.a)(e,(function(e){e.players=e.players.filter((function(e){return e.id!==t.payload.playerId}))}));case q:return Object(gt.a)(e,(function(e){e.players=e.players.map((function(e){return e.id!==t.payload.playerId?e:Object(mt.a)(Object(mt.a)({},e),t.payload.playerData)}))}));case J:return Object(gt.a)(e,(function(e){e.party=t.payload.party}));case U:return Object(gt.a)(e,(function(e){e.gamesFilter=t.payload.gamesFilter}));case Q:return Object(gt.a)(e,(function(e){e.games=e.games.concat(t.payload.games),e.players=e.players.map((function(e){return e.id!==t.payload.playerId?e:Object(mt.a)(Object(mt.a)({},e),{},{lastFetch:(new Date).toString()})})),e.ownership=e.ownership.filter((function(e){return e.playerId!==t.payload.playerId})).concat(t.payload.ownership)}));default:return e}}}),ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||lt.c,ht=Object(lt.d)(Object(st.a)(bt,pt),ft(Object(lt.a)(ot.a))),xt=Object(st.b)(ht);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=Object(o.a)({palette:{primary:{main:"#4D774E",dark:"#164A41",light:"#9DC88D"},secondary:{main:"#F1B24A"}}},u.frFR),yt=new m.a;c.a.render(Object(D.jsxs)(g.a,{client:yt,children:[Object(D.jsx)(s.a,{theme:Ot,children:Object(D.jsx)(l.a,{store:ht,children:Object(D.jsx)(d.a,{loading:null,persistor:xt,children:Object(D.jsx)(ct,{})})})}),Object(D.jsx)(j.ReactQueryDevtools,{initialIsOpen:!1})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[219,1,2]]]);
//# sourceMappingURL=main.4a278cee.chunk.js.map