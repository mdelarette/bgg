(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},114:function(e,t){},116:function(e,t){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(70),c=a.n(l),o=a(6),i=a(72),m=a(73),u=a(74),s=a(80),d=a(75),p=a(81),g=a(76),b=a.n(g),E=(a(101),a(39)),y=a(147),f=a(148),w=a(50),v=a.n(w),h=a(77),O=a(51),j=a(52),P=a.n(j),N=function(e){return{type:"FETCH_PLAYER_GAMES",payload:e}};function x(e,t,a){return-1===a.slice(t+1).findIndex(function(t,a,n){return t.id===e.id})}var k={updatePlayerToStore:function(e,t,a){return console.log("updatePlayerToStore",e,t,a),{type:"UPDATE_PLAYER",payload:{playerId:e,name:t,bggName:a}}},deletePlayerFromStore:function(e){return{type:"DELETE_PLAYER",payload:{playerId:e}}},fetchPlayerGames:function(e){return function(){var t=Object(h.a)(v.a.mark(function t(a,n){var r,l,c,o,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetchPlayerGames",e.id,e.bggName),l=[],t.prev=2,t.next=5,P.a.get("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e.bggName));case 5:return c=t.sent,Object(O.parseString)(c.data,function(e,t){r=t.items.item.map(function(e){return{id:e.$.objectid,name:e.name[0]._}})}),l=r.filter(x),o=(o=l.reduce(function(e,t){return e+"".concat(t.id,",")},"")).slice(0,o.length-1),t.next=12,P.a.get("https://www.boardgamegeek.com/xmlapi2/thing?id=".concat(o));case 12:i=t.sent,Object(O.parseString)(i.data,function(e,t){console.log("_games.items=",t.items),r=t.items.item.map(function(e){return{id:e.$.id,name:e.name[0].$.value,min:e.minplayers[0].$.value,max:e.maxplayers[0].$.value}})}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:a(N(r));case 20:case"end":return t.stop()}},t,null,[[2,16]])}));return function(e,a){return t.apply(this,arguments)}}()}},_=Object(o.b)(null,k)(function(e){var t=e.player,a=e.updatePlayerToStore,n=e.deletePlayerFromStore,l=e.fetchPlayerGames,c=r.a.useState(!1),o=Object(E.a)(c,2),i=o[0],m=o[1],u=r.a.useState(t.name),s=Object(E.a)(u,2),d=s[0],p=s[1],g=r.a.useState(t.bggName),b=Object(E.a)(g,2),w=b[0],v=b[1];return r.a.createElement("div",{className:"w3-margin-bottom"},i&&r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",r.a.createElement("input",{type:"text",name:"name",value:d,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",null,"BGG: ",r.a.createElement("input",{type:"text",name:"bggName",value:w,onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement(f.a,{intent:"primary",text:"Valid",onClick:function(){a(t.id,d,w),m(!1)}}),r.a.createElement(f.a,{intent:"none",text:"Cancel",onClick:function(){return m(!1)}})))),!i&&r.a.createElement("div",null,r.a.createElement("p",null,t.name),r.a.createElement("p",null,t.bggName),r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement(f.a,{intent:"primary",text:"Edit",onClick:function(){return m(!0)}}),r.a.createElement(f.a,{intent:"danger",text:"Remove",onClick:function(){return n(t.id)}}),r.a.createElement(f.a,{intent:"none",text:"Fetch",onClick:function(){return l(t)},disabled:!t.bggName})))))}),S=Object(o.b)(function(e,t){return{players:e.bgg.players}},null)(function(e){return r.a.createElement("div",{className:"w3-border w3-border-black"},e.players.map(function(e,t){return r.a.createElement(_,{key:e.id,player:e})}))});var A=Object(o.b)(function(e,t){return{games:e.bgg.games}},null)(function(e){var t=e.games;return r.a.createElement("div",{className:"w3-white w3-margin-top w3-margin-bottom"},r.a.createElement("table",{className:"w3-table w3-striped w3-bordered w3-hoverable"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"w3-teal"},r.a.createElement("th",null,"name"),r.a.createElement("th",null,"min"),r.a.createElement("th",null,"max"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.min),r.a.createElement("td",null,e.max))}))))}),C=Object(o.b)(function(e,t){return{games:e.bgg.games,nbPlayers:e.bgg.players.length}},null)(function(e){var t=r.a.useMemo(function(){return function(e,t){var a=e.filter(function(e){return e.min<=t&&t<=e.max});return 0===a.length?void 0:a[0]}(e.games,e.nbPlayers)},[e.nbPlayers,e.games.length]);return t?r.a.createElement("div",{className:"w3-panel w3-pale-green w3-bottombar w3-border-green w3-border"},r.a.createElement("h1",null,t.name),r.a.createElement("h2",null,"min: ".concat(t.min," | max: ").concat(t.max))):r.a.createElement("div",{className:"w3-margin w3-card w3-yellow"},r.a.createElement("h3",null,"no game :("))}),T=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).addPlayer=function(){var e={id:b()(),name:"rename me",bggName:"",age:18,color:"blue",fetched:!1};a.props.addPlayerToStore(e)},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"w3-row w3-light-blue"},r.a.createElement("div",{className:"w3-third w3-container"},r.a.createElement("button",{className:"w3-margin w3-button w3-teal",onClick:this.addPlayer},"Add player"),r.a.createElement(S,null)),r.a.createElement("div",{className:"w3-third w3-container"},r.a.createElement(C,null)),r.a.createElement("div",{className:"w3-third w3-container"},r.a.createElement(A,null)))}}]),t}(n.Component),L={addPlayerToStore:function(e){return{type:"ADD_PLAYER",payload:{player:e}}}},D=Object(o.b)(null,L)(T),R=a(8),Y=a(78),G=a(53),I=a(79),$=a.n(I),F=a(82),M=a(21),B={players:[],games:[]},U={key:"root",storage:$.a,whitelist:["bgg"]},H=Object(R.c)({bgg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(console.log("action.type=",t.type),console.log("action.type=",t.payload),t.type){case"ADD_PLAYER":return Object(M.a)(e,function(e){e.players.push(t.payload.player)});case"DELETE_PLAYER":return Object(M.a)(e,function(e){e.players=e.players.filter(function(e){return e.id!==t.payload.playerId})});case"UPDATE_PLAYER":return Object(M.a)(e,function(e){e.players=e.players.map(function(e){return e.id!==t.payload.playerId?e:Object(F.a)({},e,{name:t.payload.name,bggName:t.payload.bggName})})});case"FETCH_PLAYER_GAMES":return Object(M.a)(e,function(e){e.games=t.payload});default:return e}}}),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,V=Object(R.e)(Object(G.a)(U,H),J(Object(R.a)(Y.a))),W=Object(G.b)(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{store:V},r.a.createElement(i.a,{loading:null,persistor:W},r.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,a){e.exports=a(145)}},[[90,1,2]]]);
//# sourceMappingURL=main.21f7af9a.chunk.js.map